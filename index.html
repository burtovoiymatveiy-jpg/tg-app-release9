<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–∫–∞–∑ —Ä–∞–±–æ—Ç—ã @awarem</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: #ffffff; --sec-bg: #f4f4f5; --text: #000000; --hint: #707579;
            --card-border: rgba(0,0,0,0.1); --accent: #3390ec; --accent-red: #ff3b30; --accent-green: #34c759;
            --toggle-off: #dee2e6;
        }
        [data-theme="dark"] {
            --bg: #1c1c1d; --sec-bg: #2c2c2e; --text: #ffffff; --hint: #8e8e93; 
            --card-border: rgba(255,255,255,0.1); --toggle-off: #3a3a3c;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg); color: var(--text); margin: 0; padding: 16px;
            display: flex; flex-direction: column; gap: 12px; transition: 0.3s;
        }

        #skeleton { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 1000; padding: 16px; box-sizing: border-box; }
        .sk-card { background: var(--sec-bg); height: 60px; border-radius: 16px; margin-bottom: 12px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        .theme-toggle {
            position: absolute; top: 12px; right: 16px; background: var(--sec-bg);
            border: 1px solid var(--card-border); border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 100;
        }

        .card { background: var(--sec-bg); border-radius: 16px; padding: 14px; border: 1px solid var(--card-border); }
        .error-border { border-color: var(--accent-red) !important; animation: shake 0.3s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }

        label { font-size: 10px; color: var(--hint); font-weight: 800; text-transform: uppercase; margin-bottom: 4px; display: block; }
        input, select, textarea {
            background: var(--bg); border: 1px solid var(--card-border); border-radius: 10px;
            color: var(--text); font-size: 16px; padding: 10px; width: 100%; box-sizing: border-box; outline: none;
        }

        .switch {
            position: relative; display: inline-block; width: 40px; height: 22px; margin: 0;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: var(--toggle-off); transition: .3s; border-radius: 22px;
        }
        .slider:before {
            position: absolute; content: ""; height: 16px; width: 16px; left: 3px; bottom: 3px;
            background-color: white; transition: .3s; border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        input:checked + .slider { background-color: var(--accent-green); }
        input:checked + .slider:before { transform: translateX(18px); }

        .preview-box {
            background: var(--sec-bg); border: 1px dashed var(--hint); border-radius: 12px;
            padding: 12px; font-family: monospace; font-size: 12px; white-space: pre-line;
            max-height: 0; opacity: 0; overflow: hidden; transition: 0.4s ease-in-out;
            margin: 0;
        }
        .preview-box.show { max-height: 400px; opacity: 1; margin-bottom: 10px; border: 1px solid var(--accent); }

        .main-btn { background: var(--accent); color: white; border: none; padding: 16px; border-radius: 14px; font-size: 16px; font-weight: 700; width: 100%; cursor: pointer; }
        .row { display: flex; gap: 8px; }
        .secondary-btn { background: var(--sec-bg); border: 1px solid var(--card-border); color: var(--accent); padding: 10px; border-radius: 12px; font-size: 13px; font-weight: 600; text-align: center; flex: 1; cursor: pointer; }
        
        .disclaimer { font-size: 10px; color: var(--hint); line-height: 1.3; text-align: center; margin-top: 8px; }
        .stats-box { text-align: center; border-top: 1px solid var(--card-border); padding-top: 12px; margin-top: 4px; }
    </style>
</head>
<body>

<div id="skeleton">
    <div class="sk-card" style="width: 40%;"></div>
    <div class="sk-card"></div>
    <div class="sk-card" style="height: 120px;"></div>
</div>

<div class="theme-toggle" onclick="toggleTheme()" id="theme-btn">‚òÄÔ∏è</div>

<div class="sub-warning" style="margin-right: 50px; background: rgba(255,152,0,0.1); border: 1px solid #ff9800; padding: 8px; border-radius: 10px; font-size: 11px; font-weight: 700; text-align: center;">
    ‚ö†Ô∏è –ü–æ–¥–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞!
</div>

<div class="row">
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/txtandpptx')">üì¢ –ö–∞–Ω–∞–ª</div>
    <div class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">‚≠ê –û—Ç–∑—ã–≤—ã</div>
</div>

<div class="card">
    <label>–í–∏–¥ —Ä–∞–±–æ—Ç—ã</label>
    <select id="type" onchange="update()">
        <option value="–†–µ—Ñ–µ—Ä–∞—Ç">üìù –†–µ—Ñ–µ—Ä–∞—Ç</option>
        <option value="–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è">üìä –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</option>
        <option value="–î–æ–∫–ª–∞–¥">üé§ –î–æ–∫–ª–∞–¥</option>
        <option value="–ü—Ä–æ–µ–∫—Ç">üí° –ü—Ä–æ–µ–∫—Ç</option>
        <option value="–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é">üñã –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–µ–∫—Ü–∏—é</option>
    </select>
    <div class="row" style="margin-top:10px">
        <div><label id="unit-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü</label><input type="number" id="count" placeholder="0" oninput="update()"></div>
        <div><label>–î–∞—Ç–∞ (–î–î.–ú–ú)</label><input type="text" id="date" maxlength="5" oninput="update()"></div>
    </div>
</div>

<div class="card">
    <label>–û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏</label>
    <textarea id="details" rows="2" placeholder="–ù–∞–ø—Ä: —à—Ä–∏—Ñ—Ç 14..." oninput="update()"></textarea>
    <div style="margin-top:10px"><label>–°—É–º–º–∞ (‚ÇΩ)</label><input type="text" id="price" placeholder="500" oninput="update()"></div>
</div>

<div class="card" style="padding: 12px 14px;">
    <div style="display: flex; justify-content: space-between; align-items: center; min-height: 24px;">
        <span style="font-size: 14px; font-weight: 700; line-height: 1;">üö® –°—Ä–æ—á–Ω—ã–π –∑–∞–∫–∞–∑</span>
        <label class="switch" style="display: flex; align-items: center;">
            <input type="checkbox" id="urgent" onchange="update()">
            <span class="slider"></span>
        </label>
    </div>
</div>

<div class="preview-box" id="preview"></div>

<button class="main-btn" onclick="copy()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∫–µ—Ç—É</button>

<div class="row">
    <button class="secondary-btn" style="color:var(--accent-red)" onclick="clearAll()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
    <button class="secondary-btn" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤</button>
</div>

<div class="stats-box">
    <div style="font-size:11px; color:var(--hint); margin-bottom: 4px;">–í—Å–µ –æ—Ç–∑—ã–≤—ã –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∑–¥–µ—Å—å:</div>
    <div style="font-size:13px; color:var(--accent); font-weight: 700; cursor:pointer;" onclick="tg.openTelegramLink('https://t.me/OTZblBblawarem')">t.me/OTZblBblawarem</div>
</div>

<div class="disclaimer">
    üí≥ <b>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 100%</b><br>
    ‚ö†Ô∏è –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ø—Ä–∞–≤–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–µ –Ω–µ—Å—É.<br>
    ‚úÖ –†–∞–±–æ—Ç–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –º–µ—Å—Ç <b>–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∞–Ω—Ç–∏–ø–ª–∞–≥–∏–∞—Ç</b>.
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    setTimeout(() => document.getElementById('skeleton').style.display = 'none', 1000);

    function setDatePlaceholder() {
        const now = new Date();
        const dd = String(now.getDate()).padStart(2, '0');
        const mm = String(now.getMonth() + 1).padStart(2, '0');
        document.getElementById('date').placeholder = `${dd}.${mm}`;
    }
    setDatePlaceholder();

    function toggleTheme() {
        const isDark = document.body.getAttribute('data-theme') === 'dark';
        document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
        document.getElementById('theme-btn').innerText = isDark ? '‚òÄÔ∏è' : 'üåô';
        tg.HapticFeedback.impactOccurred('light');
    }

    if (tg.colorScheme === 'dark') {
        document.body.setAttribute('data-theme', 'dark');
        document.getElementById('theme-btn').innerText = 'üåô';
    }

    function update() {
        const type = document.getElementById('type').value;
        const countInput = document.getElementById('count');
        const dateInput = document.getElementById('date');
        const priceInput = document.getElementById('price');
        const details = document.getElementById('details').value || '–Ω–µ—Ç';
        const isUrgent = document.getElementById('urgent').checked;

        let val = dateInput.value.replace(/\D/g, '');
        if (val.length > 2) val = val.substring(0, 2) + '.' + val.substring(2, 4);
        dateInput.value = val;

        if (countInput.value && dateInput.value.length === 5 && priceInput.value) {
            document.getElementById('preview').classList.add('show');
        } else {
            document.getElementById('preview').classList.remove('show');
        }

        document.getElementById('unit-label').innerText = type.includes("–ü—Ä–µ–∑") ? "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤" : "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü";

        let header = isUrgent ? 'üö® –°–†–û–ß–ù–´–ô –ó–ê–ö–ê–ó üö®\n' : '';
        const text = `${header}1. –í–∏–¥: ${type}
2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${countInput.value || '___'}
3. –°—Ä–æ–∫: ${dateInput.value || '___'}
4. –°—É–º–º–∞: ${priceInput.value || '___'} —Ä—É–±.
5. –î–µ—Ç–∞–ª–∏: ${details}
---
‚úÖ –°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ 100% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—É –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–Ω—Ç–∏–ø–ª–∞–≥–∏–∞—Ç–∞.`;

        document.getElementById('preview').innerText = text;
    }

    function copy() {
        const c = document.getElementById('count'), d = document.getElementById('date'), p = document.getElementById('price');
        if (!c.value || d.value.length < 5 || !p.value) {
            [c, d, p].forEach(el => { if(!el.value || el.value.length < 5) el.classList.add('error-border') });
            tg.showAlert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
            return;
        }

        const area = document.createElement("textarea");
        area.value = document.getElementById('preview').innerText;
        document.body.appendChild(area);
        area.select();
        document.execCommand('copy');
        document.body.removeChild(area);

        tg.HapticFeedback.notificationOccurred('success');
        tg.showAlert("–ê–Ω–∫–µ—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
        setTimeout(() => tg.openTelegramLink("https://t.me/awarem"), 500);
    }

    function clearAll() {
        if(confirm("–û—á–∏—Å—Ç–∏—Ç—å?")) {
            document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            document.getElementById('urgent').checked = false;
            update();
        }
    }

    update();
</script>
</body>
</html>
